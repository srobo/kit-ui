<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#3270ed" />
    <title>Robot</title>
    <link rel="stylesheet" href="node_modules/material-symbols/index.css" />
    <link rel="stylesheet" href="node_modules/bulma/css/bulma.css" />
    <link rel="stylesheet" href="src/style.css" />
    <link rel="shortcut icon" href="src/favicon.ico" />
  </head>

  <body>
    <div class="controls" id="controls">
      <div class="field has-addons control-buttons">
        <div class="control">
          <button class="button" data-action="start" title="Start">
            <span class="icon has-text-success">
              <span class="material-symbols-outlined">play_arrow</span>
            </span>
          </button>
        </div>
        <div class="control">
          <button class="button" data-action="restart" title="Restart">
            <span class="icon has-text-success">
              <span class="material-symbols-outlined">restart_alt</span>
            </span>
          </button>
        </div>
        <div class="control">
          <button class="button" data-action="kill" title="Kill">
            <span class="icon has-text-danger">
              <span class="material-symbols-outlined">dangerous</span>
            </span>
          </button>
        </div>
        <div class="control">
          <button class="button" data-action="clearLog" title="Clear log">
            <span class="icon has-text-link">
              <span class="material-symbols-outlined">delete_sweep</span>
            </span>
          </button>
        </div>
      </div>
      <p id="status"></p>
      <p id="disconnected">
        Connecting&hellip;
        <progress id="service-progress" class="progress is-primary" max="100"></progress>
      </p>
      <div class="field has-addons metadata-selectors">
        <div class="control">
          <span
            tabindex="0"
            class="button modal-trigger"
            data-target="modal-camera"
          >
            <span class="icon has-text-link">
              <span class="material-symbols-outlined">camera</span>
            </span>
          </span>
        </div>
        <div class="control">
          <span
            class="modal-trigger button"
            data-target="modal-settings"
            tabindex="0"
          >
            <span class="icon has-text-link">
              <span class="material-symbols-outlined">settings</span>
            </span>
          </span>
        </div>
      </div>
    </div>
    <div class="log-list" id="log" data-autoscroll="true">
      <button class="button is-primary log-list-scroll" id="scroll-to-bottom" title="Scroll to bottom">
        <span class="material-symbols-outlined">arrow_downward</span>
      </button>
    </div>

    <div class="modal" id="modal-settings">
      <div class="modal-background modal-background-close"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title"><span class="material-symbols-outlined">settings</span> Robot Settings</p>
          <button class="delete" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <div class="tabs is-centered is-toggle" id="settings-tab-strip">
            <ul>
              <li class="is-active">
                <a data-target="metadata">
                  <span class="icon is-small"><span class="material-symbols-outlined">robot_2</span></span>
                  Mode & Zone
                </a>
              </li>
              <li>
                <a data-target="wifi">
                  <span class="icon is-small"><span class="material-symbols-outlined">wifi</span></span>
                  WiFi
                </a>
              </li>
              <li>
                <a data-target="interface">
                  <span class="icon is-small"><span class="material-symbols-outlined">palette</span></span>
                  Interface
                </a>
              </li>
              <li>
                <a data-target="about">
                  <span class="icon is-small"><span class="material-symbols-outlined">info</span></span>
                  About
                </a>
              </li>
            </ul>
          </div>
          <div class="settings-tabs">
            <div class="settings-tab" id="settings-metadata">
              <form id="metadata">
                <div class="grid">
                  <div class="cell">
                    <label class="label">Zone</label>
                    <div class="zone-selector">
                      <div class="zone">
                        <input class="sends-mutate-request" type="radio" name="zone" id="zone-0" value="0" />
                        <label for="zone-0">0</label>
                      </div>
                      <div class="zone">
                        <label for="zone-1">1</label>
                        <input class="sends-mutate-request" type="radio" name="zone" id="zone-1" value="1" />
                      </div>
                      <div class="zone">
                        <input class="sends-mutate-request" type="radio" name="zone" id="zone-2" value="2" />
                        <label for="zone-2">2</label>
                      </div>
                      <div class="zone">
                        <label for="zone-3">3</label>
                        <input class="sends-mutate-request" type="radio" name="zone" id="zone-3" value="3" />
                      </div>
                    </div>
                  </div>
                  <div class="cell">
                    <label class="label">Mode</label>
                    <ul class="radio-buttons">
                      <li>
                        <input
                          type="radio"
                          name="mode"
                          id="mode-dev"
                          value="DEV"
                          class="sends-mutate-request"
                        />
                        <label for="mode-dev">Development</label>
                      </li>
                      <li>
                        <input
                          type="radio"
                          name="mode"
                          id="mode-comp"
                          value="COMP"
                          class="sends-mutate-request"
                        />
                        <label for="mode-comp">Competition</label>
                      </li>
                    </ul>
                  </div>
                </div>
              </form>
            </div>
            <div class="settings-tab is-hidden" id="settings-wifi">
              <div class="grid" id="wifi-info">
                <div class="cell has-text-centered-desktop is-align-content-center">
                  <p>Join other devices to the WiFi network by using the details below or scanning the QR Code</p>
                  <p>WiFi Network: <code data-from-metadata="wifi_ssid"></code></p>
                  <p>WiFi Password: <code data-from-metadata="wifi_psk"></code></p>
                  <p class="mt-3">These settings can be changed by editing <code>robot-settings.toml</code></p>
                </div>
                <div class="cell has-text-centered-desktop">
                  <canvas id="qrcode-wifi"></canvas>
                </div>
              </div>
              <div id="wifi-disabled">
                WiFi is disabled. You can enable it by editing <code>robot-settings.toml</code> and setting <code>wifi_enabled = true</code>.
              </div>
            </div>
            <div class="settings-tab is-hidden" id="settings-interface">
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label class="label" for="theme_select">Theme</label>
                </div>
                <div class="field-body">
                  <div class="field is-narrow">
                    <div class="control">
                      <div class="select">
                        <select id="theme_select" data-setting="theme">
                          <option value="auto">Automatic</option>
                          <option value="light">Light</option>
                          <option value="dark">Dark</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="field is-horizontal">
                <div class="field-label is-normal">
                  <label for="scrollback_limit" class="label">Scrollback limit</label>
                </div>
                <div class="field-body">
                  <div class="field is-narrow">
                    <div class="control">
                      <div class="select">
                        <select id="scrollback_limit" data-setting="scrollbackLimit">
                          <option value="-1">Unlimited</option>
                          <option value="1000">1,000 lines</option>
                          <option value="2000">2,000 lines</option>
                          <option value="5000">5,000 lines</option>
                          <option value="10000">10,000 lines (default)</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="settings-tab is-hidden" id="settings-about">
              <div class="columns">
                <div class="column has-text-centered">
                  <img src="src/logo.svg" alt="Student Robotics logo" width="65%">
                </div>
                <div class="column is-align-content-center">
                  <strong class="is-size-5 mb-2" data-from-metadata="os_pretty_name"></strong>
                  <p>Kit UI Version: <code id="info-kit-ui-version"></code></p>
                  <p>Python Version: <code data-from-metadata="python_version"></code></p>
                  <p>Entrypoint: <code data-from-metadata="usercode_entrypoint"></code></p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="modal" id="modal-camera">
      <div class="modal-background modal-background-close"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title"><span class="material-symbols-outlined">camera</span> Last Image Captured</p>
          <button class="delete" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p id="no-annotated-image-instructions">
            Use <code>robot.camera.see()</code>
            in your robot code to see an annotated image.
          </p>
          <img id="last-annotated-image" />
        </section>
      </div>
    </div>

    <template id="tpl-log-entry">
      <div class="log-entry">
        <div class="log-entry__ts is-narrow"></div>
        <div class="log-entry__content"></div>
      </div>
    </template>

    <script src="src/main.js" type="module"></script>
  </body>
</html>
